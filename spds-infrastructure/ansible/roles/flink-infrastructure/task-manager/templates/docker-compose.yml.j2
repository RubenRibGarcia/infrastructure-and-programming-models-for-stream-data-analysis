version: "3.7"

services:

    task-manager:
        image: flink:1.11.1-scala_2.12-java11
        container_name: task-manager
        ports:
            - "6121:6121"
            - "6122:6122"
            - "50100:50100"
            - "40100:40100"
            - "30100:30100"
        command: taskmanager
        environment:
            - JOB_MANAGER_RPC_ADDRESS={{ flink_services.flink_job_manager_address }}
        volumes:
            - ./flink-conf.yaml:/opt/flink/conf/flink-conf.yaml

networks:
  default:
    external:
      name: spds-network